function get_selected_campaigns(){let e=[];return $.each($("input[name='campaign[]']:checked"),function(){e.push($(this).val())}),e}function get_revision(){return null!==document.getElementById("revision")?$("#revision").find(":selected").val():-1}function get_revision_next(){let e=$("future_rev_id");return(console.log(e),e.length)?e.data("id"):-1}function get_team_id(){let e=$("team_id");return e.length?e.data("id"):-1}function get_member_id(){let e=$("member_id");return e.length?e.data("id"):-1}$(document).ready(function(){get_team_id();let e=document.getElementById("calendar"),t=new FullCalendar.Calendar(e,{themeSystem:"bootstrap",customButtons:{legend:{text:"What are the colors?",click:function(){$(".collapse").toggle()}}},headerToolbar:{left:"prev,today,next",center:"title",right:"legend, dayGridMonth,timeGridWeek"},columnFormat:{month:"ddd",week:"ddd M/d"},initialDate:$("#calendar").data("default-date"),weekNumbers:!0,navLinks:!0,editable:!1,firstDay:1,businessHours:[{daysOfWeek:[1,2,3,4,5],startTime:"08:00",endTime:"18:00"},],eventLimit:!0,eventDisplay:"block",eventOrder:"start,id,name,title",eventSources:[{id:"shifts",url:$("#calendar").data("source-shifts"),extraParams:function(){return{all_roles:$("#all_roles").is(":checked"),revision:get_revision(),revision_next:get_revision_next(),campaigns:get_selected_campaigns(),team:get_team_id(),member:get_member_id()}},failure:function(){alert("there was an error while fetching events!")}},{id:"holidays",url:$("#calendar").data("source-holidays"),failure:function(){alert("there was an error while fetching public holidays!")}}]});t.render(),$("#all_roles").change(function(){t.getEventSourceById("shifts").refetch()}),$("#revision").change(function(){t.getEventSourceById("shifts").refetch(),$.ajax({url:$("#calendar").data("source-revision"),data:{revision:$("#revision").find(":selected").val()},success:function(e){var t=$("#displayed_revision_name");t.empty(),t.html(e.name)}})}),$(".displayed_campaigns").on("change","input[type='checkbox']",function(){t.getEventSourceById("shifts").refetch()})});