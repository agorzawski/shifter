function get_selected_campaigns(){return $(".displayed_campaigns").val()}function get_revision(){return null!==document.getElementById("displayed_revision")?$(".displayed_revision").val():-1}function get_revision_next(){return $("[name='future_revisions_checkboxes']").length?$("input[name='future_revisions_checkboxes']:checked").data("future_rev_id"):-1}function get_specific_users(){return null!==document.getElementById("users_selection")?$(".users_selection").val():-1}function get_team_id(){let e=$("#team_id_for_ajax");return e.length?e.data("id"):-1}function get_member_id(){let e=$("member_id");return e.length?e.data("id"):-1}$(document).ready(function(){$("#table_id").DataTable({searching:!0,paging:!1,ordering:!0});let e=document.getElementById("calendar"),t=new FullCalendar.Calendar(e,{themeSystem:"bootstrap5",customButtons:{myCustomButton:{text:"Tools",click:function(){myOffcanvas=$("#tools_off_canvas"),new bootstrap.Offcanvas(myOffcanvas).show()}}},headerToolbar:{left:"prev,today,next",center:"title",right:"myCustomButton multiMonthYear,dayGridMonth,timeGridWeek"},columnFormat:{month:"ddd",week:"ddd M/d"},initialDate:$("#calendar").data("default-date"),weekNumbers:!0,navLinks:!0,editable:!1,firstDay:1,businessHours:[{daysOfWeek:[1,2,3,4,5],startTime:"08:00",endTime:"18:00"},],eventLimit:!0,eventDisplay:"block",eventOrder:"start,id,name,title",datesSet:function(e){new Highcharts.Chart({chart:{renderTo:"statBars",type:"column",events:{load(){this.showLoading("Loading data ...")}}}}),new Highcharts.Chart({chart:{renderTo:"statWheel",type:"dependencywheel",events:{load(){this.showLoading("Loading data ...")}}}}),$.ajax({method:"GET",url:$("#table_id").data("content_url"),data:{start:e.startStr,end:e.endStr},success:function(e){$("#table_id").dataTable().fnClearTable(),$("#table_id").dataTable().fnAddData(e.data),$("#table_id caption").html(e.header)}}),$.ajax({dataType:"json",method:"GET",url:$("#statBars").data("content_url"),data:{start:e.startStr,end:e.endStr},success:function(e){for(var t={chart:{renderTo:"statBars",type:"column"},title:{text:e.header},xAxis:{categories:["OP Morning","Normal Working Hours","Afternoon","OP Nights"],labels:{x:-10}},yAxis:{allowDecimals:!1,title:{text:"Amount"}},series:[{},{},{},{},{},{},{},{},{},{},{},{},{},]},a=e.data.length,n=0;n<a;n++)t.series[n].name=e.data[n][0],t.series[n].data=e.data[n].slice(2,6);new Highcharts.Chart(t),$("#statBarProgress").hide()},failure:function(){alert("there was an error while fetching stats!")}}),$.ajax({dataType:"json",method:"GET",url:$("#statWheel").data("content_url"),data:{start:e.startStr,end:e.endStr,teamId:get_team_id(),statType:"workWith"},success:function(e){var t={chart:{renderTo:"statWheel",type:"dependencywheel"},title:{text:e.header},accessibility:{point:{valueDescriptionFormat:"{index}.  {point.from} with {point.to}: {point.weight}."}},series:[{keys:["from","to","weight"],data:e.data}],dataLabels:{color:"#333",style:{textOutline:"none"},textPath:{enabled:!0},distance:10},size:"95%"};new Highcharts.Chart(t),$("#statWheelProgress").hide()},failure:function(){alert("there was an error while fetching stats!")}})},eventSources:[{id:"shifts",url:$("#calendar").data("source-shifts"),extraParams:function(){return{all_roles:$("#all_roles").is(":checked"),revision:get_revision(),revision_next:get_revision_next(),campaigns:get_selected_campaigns(),team:get_team_id(),member:get_member_id(),users:get_specific_users()}},failure:function(){alert("there was an error while fetching events!")}},{id:"holidays",url:$("#calendar").data("source-holidays"),failure:function(){alert("there was an error while fetching public holidays!")}},{id:"studies",url:$("#calendar").data("source-studies"),extraParams:function(){return{show_studies:$("#show_studies").is(":checked"),team:get_team_id(),member:get_member_id()}},failure:function(){alert("there was an error while fetching studies planning!")}}]});t.render(),$("#all_roles").change(function(){t.getEventSourceById("shifts").refetch()}),$("#show_studies").change(function(){t.getEventSourceById("studies").refetch()}),$(".users_selection").change(function(){t.getEventSourceById("shifts").refetch()}),$(".displayed_campaigns").change(function(){t.getEventSourceById("shifts").refetch()}),$("#planning-tab").click(function(){t.render()}),$("input[type=radio][name=future_revisions_checkboxes]").change(function(){t.getEventSourceById("shifts").refetch()})});