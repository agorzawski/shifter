function get_desiderata_type(){return $("#desiderata_type_form input[type='radio']:checked").val()}function get_team_desiderata_status(){return $("#showsTeamDesiderata").prop("checked")}function get_my_shifts_status(){return $("#showMyShifts").prop("checked")}function get_member_id(){let e=$("member_id");return e.length?e.data("id"):-1}$(document).ready(function(){$("#showsTeamDesiderata").on("change",function(){t.getEventSourceById("team_desiderata").refetch()}),$("#showMyShifts").on("change",function(){t.getEventSourceById("shifts").refetch()});let e=document.getElementById("calendar"),t=new FullCalendar.Calendar(e,{timeZone:"Europe/Stockholm",themeSystem:"bootstrap5",headerToolbar:{left:"prev,today,next",center:"title",right:"dayGridMonth,timeGridWeek"},columnFormat:{month:"ddd",week:"ddd M/d"},initialDate:$("#calendar").data("default-date"),weekNumbers:!0,navLinks:!0,editable:!0,selectHelper:!0,selectable:!0,selectMirror:!0,snapDuration:"00:30:00",select:function(e){$.ajax({url:$("#calendar").data("post-event"),data:{allDay:e.allDay,startStr:e.startStr,endStr:e.endStr,event_type:get_desiderata_type()},success:function(e){t.unselect(),t.getEventSourceById("desiderata").refetch()}})},eventDrop:function(e){$.ajax({url:$("#calendar").data("edit-event"),data:{allDay:e.event.allDay,startStr:e.event.startStr,endStr:e.event.endStr,id:e.event.id},success:function(e){t.getEventSourceById("desiderata").refetch()},error:function(t){e.revert()}})},eventClick:function(e){"#fcba03"!==e.event.backgroundColor&&(e.jsEvent.preventDefault(),$.ajax({url:$("#calendar").data("delete-event"),data:{id:e.event.id},success:function(e){t.getEventSourceById("desiderata").refetch()}}))},eventResize:function(e){$.ajax({url:$("#calendar").data("edit-event"),data:{allDay:e.event.allDay,startStr:e.event.startStr,endStr:e.event.endStr,id:e.event.id},success:function(e){t.getEventSourceById("desiderata").refetch()},error:function(t){e.revert()}})},firstDay:1,businessHours:[{daysOfWeek:[1,2,3,4,5],startTime:"08:00",endTime:"18:00"},],eventLimit:!0,eventDisplay:"block",eventOrder:"start,id,name,title",eventSources:[{id:"desiderata",url:$("#calendar").data("source-desiderata"),failure:function(){alert("there was an error while fetching desiderata!")}},{id:"holidays",url:$("#calendar").data("source-holidays"),failure:function(){alert("there was an error while fetching public holidays!")}},{id:"teamevents",url:$("#calendar").data("source-team-events"),failure:function(){alert("there was an error while fetching team-events dates!")}},{id:"team_desiderata",url:$("#calendar").data("source-team-desiderata"),extraParams:function(){return{show:get_team_desiderata_status()}},editable:!1,failure:function(){alert("there was an error while fetching team desiderata!")}},{id:"shifts",url:$("#calendar").data("source-shifts"),extraParams:function(){return{all_roles:!0,all_states:!0,companion:!1,revision:-1,member:get_member_id(),show:get_my_shifts_status()}},failure:function(){alert("there was an error while fetching events!")}},]});t.render()});