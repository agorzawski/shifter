{% extends 'template_main.html'%}
{% block 'body' %}
<br/>

<div class="col-sm-8 mx-auto">
   <form action="" method="POST" enctype="multipart/form-data" class="form-horizontal">
  {% csrf_token %}
    <div class="form-row align-items-center">
      <div class="col-auto">
          <select name='revision' id='revision' class="custom-select" required>
              {% for r in revisions %}
                  <option value="{{r.number}}">{{r}}</option>
              {% endfor %}
          </select>
        </div>
        <div class="col-auto">
          <button class="btn btn-primary"> <span class="glyphicon glyphicon-upload" style="margin-right:5px;"></span>Change </button>
        </div>
    </div>
    </form>
  <hr>
</div>


<div class='ui container'>
  <div class='ui grid'>
    <div class='ui sixteen column'>
      <div id='calendar'></div>
    </div>
  </div>
</div>

</div>

  <script src='https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.7/semantic.min.js'></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js'></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.17.1/moment.min.js'></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.1.0/fullcalendar.min.js'></script>

<script id='rendered-js'>
$(document).ready(function () {

  $('#calendar').fullCalendar({
    header: {
      left: 'prev,next today',
      center: 'title',
      right: 'month,basicWeek,basicDay'
    },
    defaultView: 'basicWeek',
    defaultDate: '{{defaultDate}}',
    navLinks: true, // can click day/week names to navigate views
    editable: false,
    firstDay:1, // Monday
    eventLimit: true, // allow 'more' link when too many events

    events: [
      {% for campaign in scheduled_campaigns_list %}
      {
          title: '{{ campaign.name  }}',
          start:'{{ campaign.date_start }}',
          end:'{{ campaign.date_end }}',
          color:'#1e7dff', //blue from bootsrap primary
          //display: 'background',
      },
      {% endfor %}


    {% for shift in scheduled_shifts_list %}
    {
        title: '{{shift.member.first_name}} as {% if shift.role != null %}{{shift.role}} ({{shift.member.role}}){%else%}{{shift.member.role}}{%endif%}',
        start:'{{ shift.shift_start }}',
        end:'{{ shift.shift_end }}',
        color:{% if 'Morning' in shift.slot.name %}'#FFFFFF'{% else %}'#AFAFAF'{% endif %},
        {% if 'ShiftLeader' in shift.member.role %} eventBorderColor:'#FF0000', {% endif %}

    },
    {% endfor %}

    ] });

});
    </script>
{% endblock %}
