{% extends 'template_main.html'%}
{% block 'body' %}

<div class="col-sm-8 mx-auto" xmlns="http://www.w3.org/1999/html">

      <main role="main">
        <h1> <span class="badge badge-light"> {{currentTeam.0.campaign}} </span></h1>
        <h3>{{today.date}} {{today.time}} / SID: <strong>{{shiftID}}</strong></h3>
<!--        <h3>The following active slots are found for now: {{checkTime}} </h3>-->
        {% if activeSlot == None %} <h3><span class="badge badge-warning">Requested data is OUTSIDE scheduled shifts, showing the last one registered before the requested date!</span></h3> {%endif%}
        <h5>Control Room Phone Number: <a class="btn btn-outline-primary" href="tel:{{controlRoomPhoneNumber}}"><strong>{{controlRoomPhoneNumber}}</strong></a></h5>
        <h5>More information: <a class="btn btn-outline-primary" href="{{wwwWithMoreInfo}}">{{wwwWithMoreInfo}}</a></h5>
        <hr>
        {% for slot in activeSlots %}
        <div>
          <h1>   <span class="badge badge-{% if activeSlot == slot %}dark{%else%}light{% endif %}">  <strong> {{slot}} </strong> </span>  </h1>
          <hr>
        {% for shifter in currentTeam %}
        {% if shifter.slot == slot %}
        <div style="padding:40px;text-align:center;float:left;"> <h3><strong>{{shifter.member.first_name}}</strong> {{shifter.member.last_name}}</h3>
          <h3> <span class="badge badge-{% if shifter.member.role.name == 'ShiftLeader'%}warning{%else%}light{%endif%}"> {% if shifter.role != null %}{{shifter.role}}<br>({{shifter.member.role}}){%else%}{{shifter.member.role}}{%endif%} </span></h3>
          <h3> <span class="badge badge-{% if shifter.member.role.name == 'ShiftLeader'%}warning{%else%}secondary{%endif%}"> {{shifter.member.team}} </span></h3>
          {% if shifter.member.photo|length > 0 %} <img src='data:image/gif;base64,{{shifter.member.photo}}' height="100" alt=""/> {% endif %}
          <h4> mobile: <a class="btn btn-outline-primary" href="tel:{{shifter.member.mobile}}"><strong>{{shifter.member.mobile}}</strong></a> </h4>
          <h4> email: <a class="btn btn-outline-primary" href="mailto:{{shifter.member.email}}">{{shifter.member.email}}</a> </h4>
        </div>
          {% endif %}
        {% endfor %}
          <div style="padding:40px;text-align:center;float:left;"></div>

        <div style="clear:both;">
          <hr>
          <h3> Daily Studies</h3>
          {% for study in activeStudies%}
            <button class="accordion">{{study.title}} from {{study.study_time_start}} to {{study.study_time_end}} {% if study.priority %}   <span class="badge badge-warning"> Priority </span> {% endif %}</button>
            <div class="panel">
              <p><strong>Study Leader: </strong>{{study.member.name}}</p>
              <p><strong>Description: </strong>{{study.description}}</p>
              <p><strong>Beam Parameters:</strong></p>
              <ul>
                <li>Current: {{study.beam_current}} mA and {{study.beam_pulse_length}} us</li>
                <li>Pulse Length: {{study.beam_pulse_length}} us</li>
                <li>Repetition Rate: {{study.get_beam_reprate_display}}</li>
                <li>Destination: {{study.get_beam_destination_display}}</li>
              </ul>
              {% if study.jira is not Null %}<p>Link to <a href={{study.jira}}>JIRA</a></p> {% endif %}
              <!--{% if study.priority %} <p> <span class="badge badge-warning"> Study Priority </span> </p> {% endif %}-->
            </div>
            <div style="padding:5px;text-align:center;float:left;"></div>
          {% endfor %}
        </div>
        </div>
        {% endfor %}

      </main>

    </div>

<script>
var acc = document.getElementsByClassName("accordion");
var i;

for (i = 0; i < acc.length; i++) {
  acc[i].addEventListener("click", function() {
    this.classList.toggle("active");
    var panel = this.nextElementSibling;
    if (panel.style.display === "block") {
      panel.style.display = "none";
    } else {
      panel.style.display = "block";
    }
  });
}
</script>

{% endblock %}
