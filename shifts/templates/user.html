{% extends 'template_main.html'%}
{% block 'body' %}
    <div class="col-sm-8 mx-auto">
      <main role="main">
          <br>
          <h2> Hello {{member}}</h2>

          <ul>
              <li>For the {{campaign}} campaign you are scheduled for {{scheduled_shifts_list|length}} shifts.</li>
          </ul>

          <p><a class="btn btn-primary" href="calendar.ics?member={{member.id}};month=current" >Download iCal file with your shifts for <badge class="badge badge-warning"> {{currentmonth}}</badge></a>
              <a class="btn btn-primary" href="calendar.ics?member={{member.id}};month=next" >Download iCal file with your shifts <badge class="badge badge-warning"> {{nextmonth}}</badge></a>
          </p>
      </main>
    </div>

<br>

<div class='ui container'>
  <div class='ui grid'>
    <div class='ui sixteen column'>
      <div id='calendar'></div>
    </div>
  </div>
</div>

<script >
    document.addEventListener('DOMContentLoaded', function() {
    var calendarEl = document.getElementById('calendar');
    var calendar = new FullCalendar.Calendar(calendarEl, {
      //height: 650,
      plugins: ['bootstrap','dayGrid', 'dayGridPlugin' ],
      themeSystem: 'bootstrap',
      header: { center: 'dayGridMonth, dayGridWeek',
                right: 'prev, today, next '
              },
      // dayHeaderFormat: weekday: {'long'}, //TODO add shiftId
      defaultDate: '{{defaultDate}}',
      weekNumbers: true,
      navLinks: true, // can click day/week names to navigate views
      editable: false,
      firstDay:1, // Monday
      eventLimit: true, // allow 'more' link when too many events
      businessHours: [ // specify an array instead
         {
          daysOfWeek: [ 1, 2, 3, 4, 5 ],
           startTime: '08:00', // 8am
           endTime: '18:00' // 6pm
         },
        ],

    events: [
    {% for shift in scheduled_shifts_list %}
    {
        title: '{{shift.member.first_name}} as {% if shift.role != null %}{{shift.role}} ({{shift.member.role}}){%else%}{{shift.member.role}}{%endif%} during {{shift.campaign}}',
        start:'{{ shift.shift_start }}',
        end:'{{ shift.shift_end }}',
        color:{% if 'Morning' in shift.slot.name %}'#FFFFFF'{% else %}'#AFAFAF'{% endif %},
        {% if 'ShiftLeader' in shift.member.role %} eventBorderColor:'#FF0000', {% endif %}
    },
    {% endfor %}
    ]
   });

    calendar.render();
  });
    </script>


{% endblock %}